{% extends "base.html" %}

{% block content %}

{% if current_user.is_authenticated and current_user.id in sellers %}
<p><a href="{{ url_for('inventory.index') }}" type="button" class="btn btn-light">Seller Inventory</a></p>
{% endif %}

<br><br>

<h2>Products for sale:</h2>

<div class="dropdown" style="color: aliceblue; text-align: right; margin-bottom: 25px; position:static">
  <div class="dropdown" style="color: aliceblue; text-align: right; margin-bottom: 25px; position:static">
    <button class="dropbtn">Sort By</button>
    <div class="dropdown-content">
      <a href="{{ url_for('index.sortedindex', sortoption=1, page_num=1) }}" type="button" class="btn btn-light">Price Asc</a>
      <a href="{{ url_for('index.sortedindex', sortoption=2, page_num=1) }}" type="button" class="btn btn-light">Price Desc</a>
      <a href="{{ url_for('index.index') }}" type="button" class="btn btn-light">Product ID</a>
    </div>
  </div>
  <div class="dropdown" style="color: aliceblue; text-align: right; margin-bottom: 25px; position:static">
    <button class="dropbtn">Filter By Category</button>
    <div class="dropdown-content">
      <a href="{{ url_for('index.categorizedindex', category=1, page_num=1) }}" type="button" class="btn btn-light">Clothing</a>
      <a href="{{ url_for('index.categorizedindex', category=2, page_num=1) }}" type="button" class="btn btn-light">Food</a>
      <a href="{{ url_for('index.categorizedindex', category=3, page_num=1) }}" type="button" class="btn btn-light">Gadgets</a>
      <a href="{{ url_for('index.categorizedindex', category=4, page_num=1) }}" type="button" class="btn btn-light">Media</a>
      <a href="{{ url_for('index.categorizedindex', category=5, page_num=1) }}" type="button" class="btn btn-light">Misc</a>
    </div>
  </div>
    <form action="{{ url_for('index.index') }}" method="POST">
      {{ form.csrf_token }}
      {{ form.hidden_tag() }}
      <p>
        {{ form.searchValue.label }}<br/>
        {{ form.searchValue(size=32) }}<br/>
        {% for error in form.searchValue.errors %}
        <span style="color: red;">[{{ error }}]</span>
        {% endfor %}
      </p>
      <p>{{ form.submit() }}</p>
    </form>
</div>

<table class='table table-hover table-bordered container'>
  <thead class="thead-dark">
    <tr>
      <th scope="col">Product ID</th>
      <th scope="col">Product Name</th>
      <th scope="col">Price</th>
      <th scope="col">Image</th>
    </tr>
  </thead>
  <tbody>
    {% for product in avail_products%}
      <tr>
        <th scope="row">{{product.id}}</th>
        <td><a href="{{ url_for('products.products', pid=product.id, sortoption=0) }}" type="button" class="btn btn-light">{{product.name}}</a></td>
        <td>{{product.price}}</td>
        <td><img width="200" src="{{product.image}}"/></td>
      </tr>
    {% endfor %}
  </tbody>
</table>

<!-- if this isn't the first page, have a previous page button -->
{% if page_num > 1 %}

<!-- if we have a sort, keep the sortedindex -->
{% if sortoption != 0 %}
<a href="{{ url_for('index.sortedindex', sortoption=sortoption, page_num=(page_num - 1)) }}" type="button" class="btn btn-light">prev</a>

{% else %}

<!-- if we have a category filter, keep the categorizedindex -->
{% if category != 0 %}
<a href="{{ url_for('index.categorizedindex', category=category, page_num=(page_num - 1)) }}" type="button" class="btn btn-light">prev</a>

<!-- default listings if there's no sort/filter -->
{% else %}
<a href="{{ url_for('index.sortedindex', sortoption=0, page_num=(page_num - 1)) }}" type="button" class="btn btn-light">prev</a>

{% endif %}
{% endif %}

{% endif %}

<!-- create a next page button -->

<!-- if we have a sort, keep the sortedindex -->
{% if sortoption != 0 %}
<a href="{{ url_for('index.sortedindex', sortoption=sortoption, page_num=(page_num + 1)) }}" type="button" class="btn btn-light">next</a>

{% else %}

<!-- if we have a category filter, keep the categorizedindex -->
{% if category != 0 %}
<a href="{{ url_for('index.categorizedindex', category=category, page_num=(page_num + 1)) }}" type="button" class="btn btn-light">next</a>

<!-- default listings if there's no sort/filter -->
{% else %}
<a href="{{ url_for('index.sortedindex', sortoption=0, page_num=(page_num + 1)) }}" type="button" class="btn btn-light">next</a>

{% endif %}
{% endif %}


{% endblock %}
